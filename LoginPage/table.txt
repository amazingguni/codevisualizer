CREATE TABLE User (
  USER_KEY INT NOT NULL AUTO_INCREMENT,
  ID VARCHAR(32) NOT NULL,
  PASSWORD VARCHAR(32) NOT NULL,
  LASTACCESS TIMESTAMP NOT NULL,
  PRIMARY KEY(USER_KEY)
) ENGINE=INNODB DEFAULT CHARACTER SET=utf8_general_ci;

CREATE TABLE Project (
PROJECT_KEY INT NOT NULL AUTO_INCREMENT,
PROJECT_NAME VARCHAR(128) NOT NULL,
PROJECT_PATH VARCHAR(512) NOT NULL,
USER_KEY INT NOT NULL,
FOREIGN KEY (USER_KEY) REFERENCES User(USER_KEY)
ON UPDATE CASCADE ON DELETE CASCADE,
PRIMARY KEY(PROJECT_KEY)
) ENGINE=INNODB DEFAULT CHARACTER SET=utf8_general_ci;

CREATE TABLE Code (
PROJECT_KEY INT NOT NULL,
CODE_KEY INT NOT NULL AUTO_INCREMENT,
CODE_NAME VARCHAR(128) NOT NULL,
LAST_CODE_ACCESS TIMESTAMP NOT NULL,
LAST_CODE_COMPILE TIMESTAMP,
FOREIGN KEY (PROJECT_KEY) REFERENCES Project(PROJECT_KEY) 
ON UPDATE CASCADE ON DELETE CASCADE,
PRIMARY KEY(CODE_KEY)
) ENGINE=INNODB DEFAULT CHARACTER SET=utf8_general_ci;


CREATE TABLE CurrentStatus (
USER_KEY INT NOT NULL,
LAST_PID INT,
PROJECT_KEY INT NOT NULL,
FLAG INT,
FOREIGN KEY (USER_KEY) REFERENCES User(USER_KEY) 
ON UPDATE CASCADE ON DELETE CASCADE,
FOREIGN KEY (PROJECT_KEY) REFERENCES Project(PROJECT_KEY) 
ON UPDATE CASCADE ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARACTER SET=utf8_general_ci;